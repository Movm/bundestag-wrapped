# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Build & Development Commands

```bash
npm install          # Install dependencies
npm run dev          # Start Vite dev server
npm run build        # TypeScript check + Vite build
npm run lint         # ESLint (jsx-a11y, react-hooks, typescript-eslint)
npm test             # Run Vitest tests once
npm run test:watch   # Run Vitest in watch mode
```

## Architecture Overview

This is a **static React app** that visualizes German Bundestag speech data in a Spotify Wrapped-style format. All data is **pre-generated JSON** served from `public/` - there is no backend.

### Tech Stack
- React 19 + TypeScript, Vite 7, TailwindCSS 4
- TanStack React Query for data fetching
- Motion for animations
- React Router for navigation

### Data Layer
Static JSON files in `public/`:
- `wrapped.json` - Main statistics (party data, tone analysis, quizzes)
- `speakers/*.json` - Individual speaker profiles (~700 files)
- `speeches_db.json` - Full speech database (20MB)
- `words_index.json` - Word search index

Data is loaded via React Query hooks in `src/hooks/useDataQueries.ts`. Types are defined in `src/data/wrapped.ts`.

### Core Components

**Pages** (`src/components/`):
- `MainWrappedPage` - Main scrollable experience with quiz/reveal slides
- `SpeakerWrappedPage` - Individual speaker profiles at `/wrapped/:slug`
- `SuchePage` - Speech search at `/suche`
- `AbgeordnetePage` - All representatives view
- `DokumentationPage` - Methodology docs (light theme)

**Slide System** (`src/components/slides/`):
Modular slides following naming convention:
- `intro-*` - Section introductions
- `quiz-*` - Interactive quiz questions
- `info-*` - Educational context
- `reveal-*` - Answer/stats reveals
- `chart-*` - Bar chart comparisons

Shared slide components in `slides/shared/` (SlideContainer, SlideQuiz, SlideHeader, etc.)

Slide sequence defined in `src/components/main-wrapped/constants.ts`.

**Layouts** (`src/layouts/MainLayout.tsx`):
- `DarkLayout` - For main content pages
- `LightLayout` - For docs/legal pages

### Path Alias
`@/` maps to `src/` (configured in vite.config.ts)

### Sharepic System
Canvas-based image generation for social sharing in `src/lib/`:
- `share-canvas.ts` - General sharepic generation
- `speaker-share-canvas.ts` - Speaker-specific sharepics
- `sharepic-configs/` - Per-slide sharepic configurations

## Data Source
Data is generated by the separate [bundestag-analysis](https://github.com/movm/bundestag-analysis) Python CLI and copied to `public/`.
